:root {
  color-scheme: light dark;
  --font-sans:
    'Inter', 'Noto Sans JP', 'Hiragino Sans', 'Yu Gothic UI', 'Segoe UI', system-ui, -apple-system,
    BlinkMacSystemFont, sans-serif;
  --font-display:
    'Inter', 'Noto Sans JP', 'Hiragino Sans', 'Yu Gothic UI', 'Segoe UI', system-ui, -apple-system,
    BlinkMacSystemFont, sans-serif;
  --line-height-body: 1.65;
  --line-height-tight: 1.3;
  --line-height-display: 1.22;

  --text-xs: 0.8125rem;
  --text-sm: 0.9rem;
  --text-md: 1rem;
  --text-lg: 1.125rem;
  --text-xl: clamp(1.4rem, 1.1rem + 0.8vw, 1.9rem);
  --text-2xl: clamp(2rem, 1.7rem + 1.2vw, 2.7rem);

  --space-3xs: 0.25rem;
  --space-2xs: 0.375rem;
  --space-xs: 0.5rem;
  --space-sm: 0.75rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2.25rem;
  --space-2xl: 3rem;
  --space-3xl: 4rem;

  --radius-xs: 6px;
  --radius-sm: 10px;
  --radius-md: 14px;
  --radius-lg: 18px;
  --radius-xl: 28px;
  --radius-pill: 999px;

  --shadow-xs: 0 2px 8px rgba(15, 23, 42, 0.08);
  --shadow-sm: 0 8px 22px rgba(15, 23, 42, 0.08);
  --shadow-md: 0 14px 38px rgba(15, 23, 42, 0.11);
  --shadow-lg: 0 20px 52px rgba(15, 23, 42, 0.16);

  --color-bg: #f5f6fb;
  --color-bg-subtle: #eef2f8;
  --color-surface: #ffffff;
  --color-surface-alt: #f8fafc;
  --color-surface-muted: #f1f5f9;
  --color-border: #d5dce7;
  --color-border-strong: #c3ccdd;
  --color-divider: rgba(148, 163, 184, 0.32);

  --color-text: #101828;
  --color-text-strong: #0f172a;
  --color-text-muted: #475569;
  --color-text-subtle: #64748b;
  --color-text-inverse: #ffffff;

  --color-accent: #5865f2;
  --color-accent-strong: #4752c4;
  --color-accent-soft: rgba(88, 101, 242, 0.12);

  --color-info: #2563eb;
  --color-info-soft: rgba(37, 99, 235, 0.12);

  --color-success: #0f766e;
  --color-success-soft: rgba(15, 118, 110, 0.12);

  --color-warning: #d97706;
  --color-warning-soft: rgba(217, 119, 6, 0.16);

  --color-danger: #dc2626;
  --color-danger-strong: #b91c1c;
  --color-danger-soft: rgba(220, 38, 38, 0.16);

  --focus-ring: 0 0 0 3px rgba(88, 101, 242, 0.35);

  --transition-base: 0.18s ease;

  --container-width: 1120px;
  --container-width-narrow: 780px;

  font-family: var(--font-sans);
}

@media (prefers-color-scheme: dark) {
  :root {
    --color-bg: #0f172a;
    --color-bg-subtle: #131d35;
    --color-surface: #1e293b;
    --color-surface-alt: #15233c;
    --color-surface-muted: #18273f;
    --color-border: #2b384f;
    --color-border-strong: #38475f;
    --color-divider: rgba(148, 163, 184, 0.24);

    --color-text: #e2e8f0;
    --color-text-strong: #f8fafc;
    --color-text-muted: #cbd5f5;
    --color-text-subtle: #94a3b8;
    --color-text-inverse: #0f172a;

    --color-accent-soft: rgba(129, 140, 248, 0.22);
    --color-success-soft: rgba(34, 197, 94, 0.2);
    --color-warning-soft: rgba(251, 191, 36, 0.22);
    --color-danger-soft: rgba(248, 113, 113, 0.26);
    --color-info-soft: rgba(96, 165, 250, 0.26);

    --shadow-xs: 0 2px 8px rgba(2, 6, 23, 0.28);
    --shadow-sm: 0 10px 26px rgba(2, 6, 23, 0.45);
    --shadow-md: 0 16px 40px rgba(2, 6, 23, 0.5);
    --shadow-lg: 0 24px 64px rgba(2, 6, 23, 0.55);

    --focus-ring: 0 0 0 3px rgba(129, 140, 248, 0.4);
  }
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  font-family: var(--font-sans);
}

body {
  margin: 0;
  min-height: 100vh;
  background-color: var(--color-bg);
  color: var(--color-text);
  font-size: var(--text-md);
  line-height: var(--line-height-body);
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
}

main {
  display: block;
}

a {
  color: var(--color-accent);
  text-decoration: none;
  transition:
    color var(--transition-base),
    opacity var(--transition-base);
}

a:hover,
a:focus-visible {
  color: var(--color-accent-strong);
  text-decoration: underline;
}

a:focus-visible,
button:focus-visible,
[role='button']:focus-visible,
input:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

p,
ul,
ol {
  margin: var(--space-sm) 0;
}

ul,
ol {
  padding-left: 1.25rem;
}

h1,
h2,
h3 {
  color: var(--color-text-strong);
  font-weight: 700;
  line-height: var(--line-height-display);
  margin: 0;
}

h1 {
  font-size: var(--text-2xl);
}

h2 {
  font-size: var(--text-xl);
}

h3 {
  font-size: var(--text-lg);
}

small {
  font-size: var(--text-sm);
}

strong {
  font-weight: 600;
}

hr {
  border: 0;
  border-top: 1px solid var(--color-divider);
  margin: var(--space-lg) 0;
}

.page {
  width: min(100%, var(--container-width));
  margin: var(--space-3xl) auto;
  padding: 0 var(--space-lg) var(--space-3xl);
}

.page--narrow {
  width: min(100%, var(--container-width-narrow));
}

.page-header {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
  margin-bottom: var(--space-xl);
}

.page-eyebrow {
  display: inline-flex;
  align-items: center;
  gap: var(--space-3xs);
  padding: var(--space-3xs) var(--space-xs);
  border-radius: var(--radius-pill);
  background-color: var(--color-accent-soft);
  color: var(--color-accent-strong);
  font-size: var(--text-xs);
  font-weight: 600;
  letter-spacing: 0.02em;
  text-transform: uppercase;
}

.page-title {
  font-family: var(--font-display);
  font-size: var(--text-2xl);
}

.page-lead {
  font-size: var(--text-lg);
  color: var(--color-text-muted);
  margin: 0;
}

.layout-grid {
  display: grid;
  gap: var(--space-lg);
}

.layout-grid--columns {
  align-items: start;
}

.layout-stack {
  display: flex;
  flex-direction: column;
  gap: var(--space-lg);
}

.layout-cluster {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--space-sm);
}

.layout-divider {
  margin: var(--space-lg) 0;
  border: 0;
  height: 1px;
  background: var(--color-divider);
}

.card {
  position: relative;
  background-color: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-sm);
  padding: var(--space-lg);
}

.card--minimal {
  box-shadow: none;
}

.card--muted {
  background-color: var(--color-surface-alt);
  border-color: transparent;
}

.card--info {
  border-color: rgba(37, 99, 235, 0.15);
  background-color: var(--color-info-soft);
}

.card--outlined {
  box-shadow: none;
  border-style: dashed;
}

.card-header {
  display: flex;
  flex-direction: column;
  gap: var(--space-2xs);
  margin-bottom: var(--space-sm);
}

.card-header__subtitle {
  font-size: var(--text-sm);
  color: var(--color-text-subtle);
}

.section-header {
  display: flex;
  flex-direction: column;
  gap: var(--space-2xs);
  margin-bottom: var(--space-sm);
}

.section-header__lead {
  color: var(--color-text-muted);
  font-size: var(--text-sm);
  margin: 0;
}

.button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2xs);
  padding: 0.65rem 1.2rem;
  border-radius: var(--radius-pill);
  font-weight: 600;
  letter-spacing: 0.01em;
  font-size: var(--text-md);
  border: 1px solid transparent;
  cursor: pointer;
  transition:
    transform var(--transition-base),
    box-shadow var(--transition-base),
    background-color var(--transition-base),
    color var(--transition-base),
    border-color var(--transition-base);
  text-decoration: none;
  min-height: 2.75rem;
}

.button:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

.button[disabled] {
  cursor: not-allowed;
  opacity: 0.65;
  box-shadow: none;
}

.button--primary {
  background-image: linear-gradient(
    135deg,
    var(--color-accent) 0%,
    var(--color-accent-strong) 100%
  );
  color: var(--color-text-inverse);
  box-shadow: var(--shadow-sm);
}

.button--primary:hover,
.button--primary:focus-visible {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.button--secondary {
  background-color: var(--color-surface-muted);
  color: var(--color-text-strong);
  border-color: var(--color-border);
}

.button--secondary:hover,
.button--secondary:focus-visible {
  transform: translateY(-1px);
  box-shadow: var(--shadow-xs);
}

.button--ghost {
  background-color: transparent;
  color: var(--color-text-muted);
  border-color: var(--color-border);
}

.button--ghost:hover,
.button--ghost:focus-visible {
  color: var(--color-text);
  border-color: var(--color-text-muted);
}

.button__label {
  display: block;
}

.button__meta {
  display: block;
  font-size: var(--text-xs);
  font-weight: 500;
  color: inherit;
  opacity: 0.85;
}

.badge {
  display: inline-flex;
  align-items: center;
  gap: var(--space-3xs);
  padding: var(--space-3xs) var(--space-xs);
  border-radius: var(--radius-pill);
  font-size: var(--text-xs);
  font-weight: 600;
  background-color: var(--color-surface-muted);
  color: var(--color-text-muted);
}

.tag {
  display: inline-flex;
  align-items: center;
  border-radius: var(--radius-pill);
  padding: 0 var(--space-xs);
  height: 1.5rem;
  font-size: var(--text-xs);
  font-weight: 600;
  background-color: var(--color-surface-muted);
  color: var(--color-text-muted);
}

.alert {
  border-radius: var(--radius-md);
  padding: var(--space-sm) var(--space-md);
  border: 1px solid transparent;
  font-weight: 600;
  line-height: var(--line-height-tight);
}

.alert--info {
  background-color: var(--color-info-soft);
  color: var(--color-info);
  border-color: rgba(37, 99, 235, 0.18);
}

.alert--success {
  background-color: var(--color-success-soft);
  color: var(--color-success);
  border-color: rgba(15, 118, 110, 0.2);
}

.alert--warning {
  background-color: var(--color-warning-soft);
  color: var(--color-warning);
  border-color: rgba(217, 119, 6, 0.24);
}

.alert--error {
  background-color: var(--color-danger-soft);
  color: var(--color-danger-strong);
  border-color: rgba(220, 38, 38, 0.22);
}

.status {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2xs);
  font-weight: 600;
  color: var(--color-text-muted);
}

.inline-spinner {
  width: 1rem;
  height: 1rem;
  border-radius: 999px;
  border: 2px solid transparent;
  border-top-color: var(--color-accent);
  border-right-color: var(--color-accent);
  animation: spin 0.75s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

.list-reset {
  margin: 0;
  padding: 0;
  list-style: none;
}

.text-muted {
  color: var(--color-text-muted);
}

.text-subtle {
  color: var(--color-text-subtle);
}

.section-note {
  font-size: var(--text-sm);
  color: var(--color-text-subtle);
  margin-top: var(--space-xs);
}

.auth-card .auth-actions,
.consent-card .consent-actions,
.checkout-card .checkout-actions {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.auth-status,
.consent-status {
  font-weight: 600;
  color: var(--color-text-muted);
  margin-top: var(--space-xs);
}

.donors-status {
  font-weight: 600;
  color: var(--color-text-muted);
  margin: 0 0 var(--space-xs);
}

.auth-error,
.consent-error,
.checkout-error,
.donors-error {
  margin-top: var(--space-sm);
}

.auth-error,
.consent-error,
.checkout-error,
.donors-error {
  display: none;
}

.auth-error[hidden],
.consent-error[hidden],
.checkout-error[hidden],
.donors-error[hidden] {
  display: none;
}

.auth-error:not([hidden]),
.consent-error:not([hidden]),
.checkout-error:not([hidden]),
.donors-error:not([hidden]) {
  display: block;
}

.consent-control {
  display: flex;
  align-items: flex-start;
  gap: var(--space-sm);
  margin-top: var(--space-sm);
}

.consent-control input[type='checkbox'] {
  width: 1.1rem;
  height: 1.1rem;
  margin-top: 0.2rem;
}

.consent-note,
.checkout-note,
.info-disclaimer {
  font-size: var(--text-sm);
  color: var(--color-text-subtle);
}

.checkout-actions {
  margin-top: var(--space-md);
  gap: var(--space-sm);
}

.checkout-action {
  display: flex;
  flex-direction: column;
  gap: var(--space-3xs);
}

.checkout-action__meta {
  display: flex;
  align-items: center;
  gap: var(--space-3xs);
  font-size: var(--text-xs);
  color: var(--color-text-subtle);
}

.checkout-loading {
  margin-top: var(--space-sm);
}

.checkout-loading[hidden] {
  display: none;
}

.checkout-loading:not([hidden]) {
  display: inline-flex;
}

.info-steps {
  padding-left: 1.25rem;
  display: flex;
  flex-direction: column;
  gap: var(--space-2xs);
  margin-bottom: var(--space-sm);
}

.donor-summary {
  font-size: var(--text-sm);
  color: var(--color-text-subtle);
}

.donor-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: var(--space-sm);
  list-style: none;
  margin: 0;
  padding: 0;
}

.donor-card {
  padding: var(--space-md);
  background-color: var(--color-surface-alt);
  border-radius: var(--radius-md);
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-xs);
  display: flex;
  flex-direction: column;
  gap: var(--space-2xs);
}

.donor-card__name {
  font-weight: 600;
  font-size: var(--text-md);
  color: var(--color-text-strong);
}

.donor-card__meta {
  font-size: var(--text-xs);
  color: var(--color-text-subtle);
}

.donor-empty {
  padding: var(--space-lg);
  border-radius: var(--radius-lg);
  border: 1px dashed var(--color-border);
  background-color: var(--color-surface-muted);
  text-align: center;
  color: var(--color-text-subtle);
  font-weight: 600;
}

.consent-actions {
  flex-wrap: wrap;
}

.consent-status {
  margin-top: var(--space-sm);
}

.thanks-hero {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
  text-align: left;
}

.thanks-note {
  font-size: var(--text-sm);
  color: var(--color-text-subtle);
}

.thanks-actions {
  margin-top: var(--space-lg);
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-sm);
  font-weight: 600;
}

.thanks-actions a {
  color: inherit;
}

.donation-meta {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--space-2xs);
  margin-top: var(--space-xs);
  font-size: var(--text-xs);
  color: var(--color-text-subtle);
}

body[data-auth-state='signed-in'] .consent-note {
  color: var(--color-text-muted);
}

body[data-auth-state='error'] .auth-status {
  color: var(--color-danger);
}

@media (min-width: 640px) {
  .auth-card .auth-actions,
  .consent-card .consent-actions,
  .checkout-card .checkout-actions {
    flex-direction: row;
    flex-wrap: wrap;
  }

  .checkout-actions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  }

  .checkout-action {
    height: 100%;
  }

  .button {
    width: auto;
  }
}

@media (min-width: 768px) {
  .page {
    padding-bottom: var(--space-3xl);
  }

  .layout-grid--columns {
    grid-template-columns: minmax(0, 1.05fr) minmax(0, 0.95fr);
  }

  .layout-grid--columns > .layout-stack {
    gap: var(--space-xl);
  }
}

@media (max-width: 640px) {
  .page {
    margin: var(--space-2xl) auto;
    padding: 0 var(--space-md) var(--space-2xl);
  }

  .card {
    padding: var(--space-md);
  }

  .page-title {
    font-size: clamp(1.8rem, 1.6rem + 2vw, 2.2rem);
  }

  .layout-grid {
    gap: var(--space-md);
  }

  .layout-stack {
    gap: var(--space-md);
  }
}

.thanks-container {
  width: min(100%, var(--container-width-narrow));
  margin: var(--space-3xl) auto;
  padding: var(--space-xl) var(--space-lg);
  background-color: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border);
  box-shadow: var(--shadow-sm);
}

.thanks-container h1 {
  margin-bottom: var(--space-sm);
}

.thanks-link {
  margin-top: var(--space-lg);
  font-weight: 600;
}

@media (max-width: 520px) {
  .thanks-container {
    margin: var(--space-xl) var(--space-sm);
    padding: var(--space-lg) var(--space-md);
  }
}
