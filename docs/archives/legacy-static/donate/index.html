<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Donation Portal | Donate</title>
    <meta
      name="description"
      content="Donation Portal の寄付受付ページです。Discord ログインと掲示同意の管理が行えます。"
    />
    <link rel="stylesheet" href="/styles/base.css" />
  </head>
  <body>
    <main class="page page--donate" aria-labelledby="page-title">
      <header class="page-header">
        <span class="page-eyebrow">Donation Portal</span>
        <h1 id="page-title" class="page-title">寄付のご案内</h1>
        <p class="page-lead">
          Discord コミュニティの運営費を支える任意の寄付を受け付けています。Discord
          でログインし、掲示への同意を設定してください。
        </p>
      </header>

      <div class="layout-grid layout-grid--columns">
        <div class="layout-stack">
          <section class="card auth-card" aria-labelledby="auth-section-title">
            <div class="section-header">
              <h2 id="auth-section-title">Discord ログイン</h2>
              <p id="auth-description" class="section-header__lead">
                Stripe Checkout で寄付を進める前に、Discord
                アカウントでログインして掲示同意を確認します。
              </p>
            </div>
            <div class="auth-actions">
              <a
                id="auth-login"
                class="button button--primary"
                href="/oauth/start"
                aria-describedby="auth-description"
              >
                <span class="button__label">Discord でログイン</span>
                <span class="button__meta">掲示の同意と寄付ステータスを同期します</span>
              </a>
              <a id="auth-logout" class="button button--secondary" href="/oauth/logout" hidden>
                ログアウト
              </a>
            </div>
            <p id="auth-status" class="auth-status" role="status" aria-live="polite">
              Discord へのログインが必要です。
            </p>
            <div
              id="auth-error"
              class="alert alert--error auth-error"
              role="alert"
              aria-live="assertive"
              hidden
            ></div>
          </section>

          <section class="card consent-card" aria-labelledby="consent-section-title">
            <div class="section-header">
              <h2 id="consent-section-title">掲示への同意</h2>
              <p id="consent-explanation" class="section-header__lead">
                同意した場合、Donors ページに Discord
                の表示名を掲載します（寄付額は表示されません）。
              </p>
            </div>
            <div class="consent-control">
              <input
                type="checkbox"
                id="consent-public"
                name="consent_public"
                value="1"
                aria-describedby="consent-explanation consent-note"
                disabled
              />
              <label for="consent-public">Donors ページに表示名を掲載することに同意します</label>
            </div>
            <p id="consent-note" class="consent-note">
              Discord でログインすると同意の状態を変更できます。寄付後でも撤回が可能です。
            </p>
          </section>

          <section class="card card--muted info-card" aria-labelledby="info-section-title">
            <div class="section-header">
              <h2 id="info-section-title">これからの流れ</h2>
              <p class="section-header__lead">寄付フローの概要と注意事項です。</p>
            </div>
            <ol class="info-steps">
              <li>Discord でログインし、掲示への同意を確認します。</li>
              <li>同意内容を決めたら Stripe Checkout で寄付を行います。</li>
              <li>寄付が完了するとサンクスページへ遷移します。</li>
            </ol>
            <p class="info-disclaimer">
              いただいた寄付はコミュニティ運営にのみ利用し、対価の提供は行いません。
            </p>
          </section>
        </div>

        <section class="card checkout-card" aria-labelledby="checkout-section-title">
          <div class="section-header">
            <h2 id="checkout-section-title">寄付メニュー</h2>
            <p id="checkout-description" class="section-header__lead">
              Stripe Checkout で寄付を行います。カード決済のみ対応し、すべて税込の金額です。
            </p>
          </div>
          <div
            id="checkout-error"
            class="alert alert--error checkout-error"
            role="alert"
            aria-live="assertive"
            hidden
          ></div>
          <div class="checkout-actions" role="group" aria-labelledby="checkout-section-title">
            <div class="checkout-action">
              <button
                id="donate-onetime"
                class="button button--primary"
                type="button"
                data-mode="payment"
                data-variant="fixed300"
                data-interval=""
                aria-describedby="checkout-description checkout-note"
                disabled
              >
                <span class="button__label">単発寄付 ¥300</span>
                <span class="button__meta">少額から参加できます</span>
              </button>
              <div class="checkout-action__meta">
                <span class="tag">単発</span>
                <span>Stripe Checkout で即時決済</span>
              </div>
            </div>
            <div class="checkout-action">
              <button
                id="donate-monthly"
                class="button button--primary"
                type="button"
                data-mode="subscription"
                data-variant="fixed300"
                data-interval="monthly"
                aria-describedby="checkout-description checkout-note"
                disabled
              >
                <span class="button__label">毎月の寄付 ¥300</span>
                <span class="button__meta">継続支援で安定運営に貢献</span>
              </button>
              <div class="checkout-action__meta">
                <span class="tag">月額</span>
                <span>Stripe Billing で自動決済</span>
              </div>
            </div>
            <div class="checkout-action">
              <button
                id="donate-yearly"
                class="button button--primary"
                type="button"
                data-mode="subscription"
                data-variant="fixed3000"
                data-interval="yearly"
                aria-describedby="checkout-description checkout-note"
                disabled
              >
                <span class="button__label">毎年の寄付 ¥3,000</span>
                <span class="button__meta">年次でまとめて寄付</span>
              </button>
              <div class="checkout-action__meta">
                <span class="tag">年額</span>
                <span>Stripe Billing で毎年更新</span>
              </div>
            </div>
          </div>
          <p id="checkout-note" class="checkout-note">
            寄付ボタンを押すと Stripe Checkout
            に移動します。完了後は自動的にサンクスページへ戻ります。
          </p>
          <div
            id="checkout-loading"
            class="status checkout-loading"
            role="status"
            aria-live="polite"
            hidden
          >
            <span class="inline-spinner" aria-hidden="true"></span>
            <span>Stripe Checkout を準備しています…</span>
          </div>
        </section>
      </div>
    </main>
    <script type="module" src="/donate/app.js"></script>
  </body>
</html>
