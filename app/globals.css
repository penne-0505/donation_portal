@import 'tailwindcss';

@theme inline {
  --font-sans:
    var(--font-inter), var(--font-noto-sans-jp), -apple-system, BlinkMacSystemFont, 'Segoe UI',
    system-ui, sans-serif;
  --font-display:
    var(--font-zen-kaku-gothic-new), var(--font-inter), var(--font-noto-sans-jp), -apple-system,
    BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  --color-root: #f7f9fb;
  --color-background: #ffffff;
  --color-foreground: #111827;
  --color-muted: #475569;
  --color-muted-foreground: #64748b;
  --color-border: rgba(15, 23, 42, 0.12);
  --color-surface: rgba(255, 255, 255, 0.72);
  --color-surface-strong: rgba(255, 255, 255, 0.88);
  --color-accent: #5865f2;
  --shadow-soft: 0 1px 2px rgba(15, 23, 42, 0.04);
  --ease-glass: cubic-bezier(0.24, 0.56, 0.28, 0.98);
  --ease-macos: cubic-bezier(0.4, 0, 0.2, 1);
  --transition-timing-function-macos: cubic-bezier(0.4, 0, 0.2, 1);
}

:root {
  color-scheme: light;
  --surface-root: #f6f8fb;
  --surface-panel: rgba(255, 255, 255, 0.86);
  --surface-panel-strong: rgba(255, 255, 255, 0.94);
  --surface-gloss: rgba(255, 255, 255, 0.98);
  --surface-divider: rgba(15, 23, 42, 0.08);
  --surface-divider-strong: rgba(15, 23, 42, 0.16);
  --surface-glint: rgba(255, 255, 255, 0.55);
  --accent-ambient-soft: rgba(88, 101, 242, 0.035);
  --accent-ambient: rgba(88, 101, 242, 0.05);
  --accent-ambient-strong: rgba(88, 101, 242, 0.07);
  --accent-ink: #111827;
  --glass-border-soft: linear-gradient(180deg, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.08));
  --glass-border-strong: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.88),
    rgba(94, 105, 140, 0.24)
  );
  --glass-shadow-soft: 0 1px 2px rgba(15, 23, 42, 0.08);
  --glass-shadow-strong: 0 2px 4px rgba(15, 23, 42, 0.12);
  --glow-ambient-color: rgba(255, 255, 255, 0.6);
  --hover-ring: rgba(15, 23, 42, 0.12);
  --cta-layer-base: linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(243, 245, 250, 0.9));
  --cta-layer-muted: rgba(17, 24, 39, 0.3);
  --cta-layer-ink: rgba(17, 24, 39, 0.92);
  --motion-duration-standard: 260ms;
}

@layer base {
  * {
    @apply border-border/70;
  }

  body {
    @apply bg-root text-foreground;
    font-family: var(--font-sans);
  }

  a {
    @apply text-foreground transition-colors hover:text-foreground/80;
  }
}

@layer components {
  .app-shell {
    isolation: isolate;
  }

  .donate-cta-animated {
    position: relative;
    isolation: isolate;
    overflow: hidden;
    z-index: 0;
  }

  .donate-cta-animated::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: var(--cta-layer-base);
    box-shadow:
      inset 0 0 0 1px var(--surface-divider),
      0 1px 2px rgba(15, 23, 42, 0.18);
    z-index: -2;
    transition:
      background var(--motion-duration-standard) var(--ease-macos),
      box-shadow var(--motion-duration-standard) var(--ease-macos),
      opacity var(--motion-duration-standard) var(--ease-macos);
    pointer-events: none;
  }

  .donate-cta-animated::before {
    content: '';
    position: absolute;
    inset: -20%;
    border-radius: 999px;
    background: radial-gradient(circle at 35% 50%, rgba(255, 255, 255, 0.25) 0%, transparent 55%);
    opacity: 0;
    transition: opacity var(--motion-duration-standard) var(--ease-macos);
    z-index: -1;
    pointer-events: none;
  }

  .donate-cta-animated:not(:disabled):not([aria-disabled='true']):hover::before,
  .donate-cta-animated:not(:disabled):not([aria-disabled='true']):focus-visible::before {
    opacity: 1;
  }

  .donate-cta-animated:not(:disabled):not([aria-disabled='true']):hover::after,
  .donate-cta-animated:not(:disabled):not([aria-disabled='true']):focus-visible::after {
    box-shadow:
      inset 0 0 0 1px var(--surface-divider-strong),
      0 2px 6px rgba(15, 23, 42, 0.22);
  }

  .donate-cta-animated:disabled::before,
  .donate-cta-animated[aria-disabled='true']::before {
    opacity: 0;
  }

  .donate-cta-animated:disabled::after,
  .donate-cta-animated[aria-disabled='true']::after {
    opacity: 0.75;
    box-shadow: inset 0 0 0 1px var(--surface-divider);
  }

  .donate-cta-animated[data-accent='primary']::after {
    background: linear-gradient(180deg, rgba(16, 21, 36, 0.95), rgba(19, 26, 44, 0.85));
    box-shadow:
      inset 0 0 0 1px rgba(255, 255, 255, 0.12),
      0 2px 12px rgba(15, 23, 42, 0.32);
  }

  .donate-cta-animated[data-accent='primary']::before {
    background:
      radial-gradient(circle at 30% 50%, rgba(88, 101, 242, 0.22), transparent 55%),
      radial-gradient(circle at 70% 50%, rgba(255, 255, 255, 0.3), transparent 60%);
  }

  .donate-cta-animated[data-accent='primary']:not(:disabled):not([aria-disabled='true'])::before {
    opacity: 0.65;
  }

  .donate-cta-animated[data-accent='primary']:not(:disabled):not(
      [aria-disabled='true']
    ):hover::before,
  .donate-cta-animated[data-accent='primary']:not(:disabled):not(
      [aria-disabled='true']
    ):focus-visible::before {
    opacity: 1;
  }

  .donate-cta-animated[data-accent='primary']:disabled::after,
  .donate-cta-animated[data-accent='primary'][aria-disabled='true']::after {
    background: linear-gradient(180deg, rgba(28, 34, 54, 0.84), rgba(24, 29, 46, 0.78));
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.08);
  }
}

@layer utilities {
  .font-hero {
    font-family: var(--font-display);
    letter-spacing: -0.01em;
  }

  .font-hero-sub {
    font-family: var(--font-noto-sans-jp), var(--font-sans);
    letter-spacing: 0;
  }

  .bg-root {
    background-color: var(--surface-root);
    background-image:
      radial-gradient(980px 680px at 10% -8%, var(--accent-ambient-strong) 0%, transparent 65%),
      radial-gradient(1020px 640px at 90% -6%, var(--accent-ambient-soft) 0%, transparent 68%),
      linear-gradient(180deg, #ffffff, var(--surface-root));
    background-repeat: no-repeat;
    background-position:
      10% -8%,
      92% -6%,
      center;
  }

  .bg-panel,
  .bg-surface {
    background-color: var(--surface-panel);
    border: 1px solid var(--surface-divider);
  }

  .bg-panel-strong,
  .bg-surface-strong {
    background-color: var(--surface-panel-strong);
    border: 1px solid var(--surface-divider-strong);
    box-shadow: inset 0 1px 0 var(--surface-glint);
  }

  .bg-gloss {
    background-color: var(--surface-gloss);
    border: 1px solid rgba(255, 255, 255, 0.7);
    box-shadow: inset 0 1px 0 var(--surface-glint);
  }

  .text-muted-foreground {
    color: var(--color-muted);
  }

  .shadow-soft {
    box-shadow: var(--shadow-soft);
  }
}

@layer utilities {
  .transition-glass {
    transition-property: background-color, border-color, color, filter, box-shadow, opacity;
    transition-duration: var(--motion-duration-standard);
    transition-timing-function: var(--ease-macos);
  }

  :is(.glass, .glass-sm, .glass-md, .glass-lg, .glass-strong) {
    position: relative;
    border: 1px solid transparent;
    border-image: var(--glass-border-soft) 1;
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.26), rgba(255, 255, 255, 0.04));
    box-shadow:
      0 1px 2px rgba(15, 23, 42, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.28);
    backdrop-filter: blur(18px) saturate(135%) !important;
    -webkit-backdrop-filter: blur(18px) saturate(135%) !important;
  }

  .glass-sm {
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.04));
    box-shadow:
      0 1px 2px rgba(15, 23, 42, 0.08),
      inset 0 1px 0 rgba(255, 255, 255, 0.22);
  }

  .glass-card {
    position: relative;
    border: 1px solid transparent;
    border-image: var(--glass-border-strong) 1;
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.34), rgba(255, 255, 255, 0.08));
    box-shadow:
      0 2px 6px rgba(15, 23, 42, 0.12),
      inset 0 1px 0 rgba(255, 255, 255, 0.4);
    backdrop-filter: blur(28px) saturate(150%) !important;
    -webkit-backdrop-filter: blur(28px) saturate(150%) !important;
    overflow: hidden;
  }

  .glass-card::before {
    content: '';
    position: absolute;
    inset: 1px;
    border-radius: inherit;
    background: radial-gradient(
      circle at 22% 15%,
      rgba(255, 255, 255, 0.5) 0%,
      rgba(255, 255, 255, 0.12) 30%,
      transparent 60%
    );
    opacity: 0.55;
    pointer-events: none;
  }

  .glass-card > * {
    position: relative;
    z-index: 1;
  }

  .glass,
  .glass-md {
    border-image: var(--glass-border-soft) 1;
  }

  .glass-strong,
  .glass-lg {
    border-image: var(--glass-border-strong) 1;
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.38), rgba(255, 255, 255, 0.12));
    box-shadow:
      0 2px 6px rgba(15, 23, 42, 0.14),
      inset 0 1px 0 rgba(255, 255, 255, 0.45);
    backdrop-filter: blur(24px) saturate(160%) !important;
    -webkit-backdrop-filter: blur(24px) saturate(160%) !important;
  }

  :is(.glass, .glass-sm, .glass-md, .glass-lg, .glass-strong)::after {
    content: '';
    position: absolute;
    inset: 1px;
    pointer-events: none;
    border-radius: inherit;
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.38), rgba(255, 255, 255, 0));
  }

  .site-header {
    backdrop-filter: blur(12px) saturate(150%);
    -webkit-backdrop-filter: blur(12px) saturate(150%);
    background: rgba(255, 255, 255, 0.1);
    border-bottom: 1px solid rgba(255, 255, 255, 0.3);
    transition:
      background-color 0.35s var(--ease-macos),
      border-color 0.35s var(--ease-macos),
      backdrop-filter 0.35s var(--ease-macos),
      -webkit-backdrop-filter 0.35s var(--ease-macos);
  }

  .site-header[data-top='true'] {
    background: transparent;
    border-bottom-color: transparent;
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }

  .site-header[data-top='true'] .header-surface {
    background: transparent;
    border: none;
    border-image: none;
    box-shadow: none;
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }

  .site-header[data-top='true'] .header-surface::after {
    opacity: 0;
  }

  .shadow-minimal {
    box-shadow:
      0 1px 2px rgba(15, 23, 42, 0.05),
      var(--shadow-inner-light, 0 0 0 0 rgba(0, 0, 0, 0));
  }

  .shadow-inner-light {
    --shadow-inner-light: inset 0 1px 0 rgba(255, 255, 255, 0.6);
  }

  .shadow-glass-elevated {
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.55),
      0 2px 8px rgba(15, 23, 42, 0.14);
  }

  .border-gradient-subtle {
    position: relative;
    z-index: 0;
    border: 1px solid transparent;
  }

  .border-gradient-subtle::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    box-sizing: border-box;
    padding: 1px;
    background:
      linear-gradient(transparent, transparent) padding-box,
      linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.62) 0%,
          rgba(255, 255, 255, 0.18) 55%,
          rgba(15, 23, 42, 0.18) 100%
        )
        border-box;
    background-clip: content-box, border-box;
    opacity: 0.85;
  }

  .glow-accent-subtle {
    transition:
      box-shadow var(--motion-duration-standard) var(--ease-macos),
      border-color var(--motion-duration-standard) var(--ease-macos),
      background-color var(--motion-duration-standard) var(--ease-macos),
      color var(--motion-duration-standard) var(--ease-macos);
    box-shadow:
      inset 0 0 0 1px rgba(255, 255, 255, 0.16),
      0 1px 2px rgba(15, 23, 42, 0.08);
  }

  .glow-accent-subtle:hover,
  .glow-accent-subtle:focus-visible {
    box-shadow:
      inset 0 0 0 1px rgba(255, 255, 255, 0.3),
      0 0 24px rgba(255, 255, 255, 0.12);
  }

  .glow-accent-medium {
    transition:
      box-shadow var(--motion-duration-standard) var(--ease-macos),
      border-color var(--motion-duration-standard) var(--ease-macos);
    box-shadow:
      inset 0 0 0 1px rgba(255, 255, 255, 0.24),
      0 1px 3px rgba(15, 23, 42, 0.12);
  }

  .glow-accent-medium:hover,
  .glow-accent-medium:focus-visible,
  .glow-accent-medium[data-active='true'] {
    box-shadow:
      inset 0 0 0 1px rgba(255, 255, 255, 0.4),
      0 0 28px rgba(255, 255, 255, 0.18);
  }

  .hover-lift {
    transition:
      border-color var(--motion-duration-standard) var(--ease-macos),
      box-shadow var(--motion-duration-standard) var(--ease-macos),
      background-color var(--motion-duration-standard) var(--ease-macos),
      color var(--motion-duration-standard) var(--ease-macos);
  }

  .hover-lift:hover,
  .hover-lift:focus-visible {
    transform: none;
    box-shadow:
      inset 0 1px 0 rgba(255, 255, 255, 0.55),
      0 1px 3px rgba(15, 23, 42, 0.08);
    border-color: rgba(255, 255, 255, 0.24);
  }

  .hover-glow {
    transition:
      box-shadow var(--motion-duration-standard) var(--ease-macos),
      background-color var(--motion-duration-standard) var(--ease-macos),
      color var(--motion-duration-standard) var(--ease-macos);
    box-shadow:
      inset 0 0 0 1px rgba(255, 255, 255, 0.1),
      0 1px 2px rgba(15, 23, 42, 0.06);
  }

  .hover-glow:hover,
  .hover-glow:focus-visible {
    box-shadow:
      inset 0 0 0 1px rgba(255, 255, 255, 0.22),
      0 0 18px rgba(255, 255, 255, 0.14);
  }

  .cta-donate-glow {
    transition:
      box-shadow var(--motion-duration-standard) var(--ease-macos),
      opacity var(--motion-duration-standard) var(--ease-macos);
    box-shadow:
      inset 0 0 0 1px rgba(255, 255, 255, 0.12),
      0 1px 4px rgba(15, 23, 42, 0.18);
  }

  .cta-donate-glow:hover,
  .cta-donate-glow:focus-visible {
    box-shadow:
      inset 0 0 0 1px rgba(255, 255, 255, 0.2),
      0 0 28px rgba(255, 255, 255, 0.2);
  }

  .plan-card {
    transition:
      border-color var(--motion-duration-standard) var(--ease-macos),
      box-shadow var(--motion-duration-standard) var(--ease-macos),
      background-color var(--motion-duration-standard) var(--ease-macos),
      opacity var(--motion-duration-standard) var(--ease-macos);
  }

  .plan-card:not([data-selected='true']):hover,
  .plan-card:not([data-selected='true']):focus-visible {
    box-shadow:
      inset 0 0 0 1px rgba(255, 255, 255, 0.26),
      0 0 24px rgba(255, 255, 255, 0.14);
    border-color: rgba(255, 255, 255, 0.32);
  }

  .plan-card[data-selected='true'] {
    box-shadow:
      inset 0 0 0 1px rgba(255, 255, 255, 0.4),
      0 0 30px rgba(255, 255, 255, 0.18);
    border-color: rgba(255, 255, 255, 0.42);
  }

  .glow-status-success {
    box-shadow:
      0 0 0 1px rgba(34, 197, 94, 0.18),
      0 0 18px rgba(34, 197, 94, 0.24);
    transition:
      box-shadow var(--motion-duration-standard) var(--ease-macos),
      filter var(--motion-duration-standard) var(--ease-macos);
  }

  .glow-status-error {
    box-shadow:
      0 0 0 1px rgba(248, 113, 113, 0.28),
      0 0 20px rgba(248, 113, 113, 0.3);
    transition:
      box-shadow var(--motion-duration-standard) var(--ease-macos),
      filter var(--motion-duration-standard) var(--ease-macos);
  }

  .transition-macos {
    transition-duration: var(--motion-duration-standard);
    transition-timing-function: var(--ease-macos);
  }

  .hover-glass {
    transition:
      background-image var(--motion-duration-standard) var(--ease-macos),
      background-color var(--motion-duration-standard) var(--ease-macos),
      box-shadow var(--motion-duration-standard) var(--ease-macos),
      border-color var(--motion-duration-standard) var(--ease-macos),
      color var(--motion-duration-standard) var(--ease-macos),
      opacity var(--motion-duration-standard) var(--ease-macos);
  }

  .hover-glass:hover,
  .hover-glass:focus-visible {
    background-image: linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.16) 0%,
      rgba(255, 255, 255, 0.08) 100%
    );
    box-shadow:
      inset 0 0 0 1px rgba(255, 255, 255, 0.26),
      0 0 18px rgba(255, 255, 255, 0.14);
  }

  .page-enter {
    animation: pageEnter 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  @keyframes pageEnter {
    from {
      opacity: 0;
      transform: translateY(12px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .fade-in-up {
    animation: fadeInUp 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
    opacity: 0;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(18px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .stagger-1 {
    animation-delay: 0.05s;
  }

  .stagger-2 {
    animation-delay: 0.1s;
  }

  .stagger-3 {
    animation-delay: 0.15s;
  }

  .stagger-4 {
    animation-delay: 0.2s;
  }

  .stagger-5 {
    animation-delay: 0.25s;
  }

  .stagger-6 {
    animation-delay: 0.3s;
  }

  .animate-bounce-in {
    animation: bounceIn 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  @keyframes bounceIn {
    0% {
      opacity: 0;
      transform: scale(0.5);
    }
    50% {
      opacity: 1;
      transform: scale(1.03);
    }
    75% {
      transform: scale(0.97);
    }
    100% {
      transform: scale(1);
    }
  }
}

:root[data-surface-mode='opaque'] :is(.glass, .glass-sm, .glass-md, .glass-lg, .glass-strong) {
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  background: rgba(255, 255, 255, 0.84);
  border-color: rgba(255, 255, 255, 0.5);
  box-shadow: 0 8px 24px rgba(15, 23, 42, 0.1);
}

@media (prefers-reduced-motion: reduce) {
  .plan-card,
  .hover-glow,
  .hover-glass,
  .hover-lift,
  .cta-donate-glow,
  .donate-cta-animated {
    transition: none !important;
  }

  .donate-cta-animated::before,
  .donate-cta-animated::after {
    transition: none !important;
    opacity: 0 !important;
  }
}
